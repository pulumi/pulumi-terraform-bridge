name: basicprogram
runtime: yaml
resources:

  # MVP resource, check string inputs and outputs.
  testres1:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "input1"

  # Chain to testres1 to test handling unknowns.
  testres2:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: ${testres1.requiredInputStringCopy}

  # Test setting optional strings.
  testres3:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputString: "y"

  # Test setting optional numbers.
  testres4:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputNumber: 3

  # Test setting optional booleans.
  testres5:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputBool: true

  # Test List[String] type propagation.
  testres6:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputStringList:
        - a
        - b
        - c

  # Test Map[String]String type propagation.
  testres7:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputStringMap:
        a: a1
        b: b1

outputs:
  # Should be equal to "input1".
  requiredInputStringCopy: ${testres1.requiredInputStringCopy}

  # Should not be set.
  optionalInputStringCopy: ${testres1.optionalInputStringCopy}

  # Should also be equal to "input1".
  requiredInputStringCopy2: ${testres2.requiredInputStringCopy}

  # Should be equal to "y".
  testoptstring: ${testres3.optionalInputStringCopy}

  # Should be equal to 3.
  testoptnumber: ${testres4.optionalInputNumberCopy}

  # Should be equal to true.
  testoptbool: ${testres5.optionalInputBoolCopy}

  # Should be equal to [a,b,c].
  teststringlist: ${testres6.optionalInputStringListCopy}

  # Should be equal to {a: a1, b: b1}.
  teststringmap: ${testres7.optionalInputStringMapCopy}
