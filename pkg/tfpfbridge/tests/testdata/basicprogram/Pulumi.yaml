name: basicprogram
runtime: yaml
resources:

  minimalRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: |-
        input1

  chainedRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: ${minimalRes.requiredInputStringCopy}

  strRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputString: "y"

  numRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputNumber: 3

  boolRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputBool: true

  stringListRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputStringLists:
        - a
        - b
        - c

  stringMapRes:
    type: testbridge:index/testres:Testres
    properties:
      statedir: state
      requiredInputString: "x"
      optionalInputStringMap:
        a: a1
        b: b1

outputs:

  testMinimal__actual: ${minimalRes.requiredInputStringCopy}
  testMinimal__expect: |-
    input1

  testComputedNull__actual:
    fn::toJSON: ${minimalRes.optionalInputStringCopy}
  testComputedNull__expect: |-
    null

  testChained__actual: ${chainedRes.requiredInputStringCopy}
  testChained__expect: |-
    input1

  testString__actual: ${strRes.optionalInputStringCopy}
  testString__expect: |-
    y

  testNumber__actual: ${numRes.optionalInputNumberCopy}
  testNumber__expect: 3

  testBool__actual: ${boolRes.optionalInputBoolCopy}
  testBool__expect: true

  testStringList__actual:
    fn::toJSON: ${stringListRes.optionalInputStringListCopies}
  testStringList__expect: |-
    ["a","b","c"]

  testStringMap__actual:
    fn::toJSON: ${stringMapRes.optionalInputStringMapCopy}
  testStringMap__expect: |-
    {"a":"a1","b":"b1"}
